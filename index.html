<!DOCTYPE html> <html lang="pt-BR"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>An√°lise de Solo</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif; background: linear-gradient(180deg, #F5F5F7 0%, #E5E5E7 100%); color: #1D1D1F; padding: 20px; font-size: 0.9em; } .container { max-width: 1200px; margin: 0 auto; padding-bottom: 40px; } /* CABE√áALHO */ .header-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04); } .header-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; } .input-group { display: flex; flex-direction: column; gap: 4px; } label { font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.5px; color: #86868B; font-weight: 500; } input[type="text"], select { border: 1px solid #D1D1D6; border-radius: 8px; padding: 8px 12px; background: white; font-size: 0.9em; transition: all 0.2s; } input[type="text"]:focus, select:focus { outline: none; border-color: #007AFF; box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1); } select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%2386868B' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px; } /* AN√ÅLISE CARDS */ .analysis-section { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 12px; padding: 20px; margin-bottom: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04); } .section-title { font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.5px; color: #86868B; font-weight: 500; margin-bottom: 12px; } .metric-row { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; flex-wrap: wrap; } .metric-label { font-size: 0.85em; color: #1D1D1F; font-weight: 500; min-width: 140px; flex-shrink: 0; } input[type="number"] { border: 1px solid #D1D1D6; border-radius: 8px; padding: 6px 10px; background: white; font-size: 0.9em; text-align: right; width: 80px; min-width: 80px; max-width: 80px; transition: all 0.2s; } input[type="number"]:focus { outline: none; border-color: #007AFF; box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1); } /* STATUS BARS - INDICADOR √öNICO */ .status-bar { height: 8px; border-radius: 4px; background: #E5E5E7; flex: 1; min-width: 120px; max-width: 200px; position: relative; overflow: hidden; } .status-indicator { position: absolute; left: 0; top: 0; height: 100%; border-radius: 4px; transition: all 0.3s ease; } .indicator-muito-baixo { background: #FF3B30; width: 20%; } .indicator-baixo { background: linear-gradient(90deg, #FF3B30 0%, #FF9500 100%); width: 40%; } .indicator-medio { background: #FFCC00; width: 60%; } .indicator-adequado { background: #34C759; width: 80%; } .indicator-alto { background: #007AFF; width: 100%; } /* INTERFERENCE CHART (pH) */ .interference-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(70px, 1fr)); gap: 8px; margin-top: 12px; } .nutrient-interference { text-align: center; padding: 8px; background: white; border-radius: 6px; border: 1px solid #E5E5E7; } .nutrient-name { font-size: 0.75em; color: #86868B; margin-bottom: 4px; } .interference-value { font-size: 0.95em; font-weight: 600; } .interference-positive { color: #34C759; } .interference-negative { color: #FF3B30; } .interference-neutral { color: #86868B; } /* BOT√ïES LADO A LADO */ .button-group { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; } .recommend-btn { background: #E5E5E7; color: #86868B; border: none; border-radius: 10px; padding: 12px 16px; font-size: 0.95em; font-weight: 400; cursor: pointer; transition: all 0.2s; text-align: left; display: flex; align-items: center; gap: 8px; position: relative; } .recommend-btn:hover { background: #D1D1D6; } .recommend-btn:active { background: #C7C7CC; } .recommend-btn::before { content: '+'; font-size: 1.2em; font-weight: 300; } /* MENU FLUTUANTE */ .floating-menu { position: absolute; bottom: 100%; left: 0; right: 0; margin-bottom: 8px; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); border-radius: 12px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 8px 32px rgba(0, 0, 0, 0.08); overflow: hidden; display: none; z-index: 1000; animation: menuSlideUp 0.2s ease-out; } .floating-menu.active { display: block; } @keyframes menuSlideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } } .menu-item { padding: 14px 16px; border-bottom: 1px solid #E5E5E7; cursor: pointer; transition: background 0.15s; display: flex; align-items: center; justify-content: space-between; font-size: 0.95em; color: #1D1D1F; } .menu-item:last-child { border-bottom: none; } .menu-item:hover { background: rgba(0, 0, 0, 0.02); } .menu-item:active { background: rgba(0, 0, 0, 0.05); } .menu-item.selected { background: rgba(0, 122, 255, 0.08); } .menu-item .checkmark { width: 20px; height: 20px; color: #007AFF; font-weight: 600; visibility: hidden; } .menu-item.selected .checkmark { visibility: visible; } /* RECOMMENDATION CARD */ .recommendation-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 12px; padding: 20px; margin-top: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04); display: none; } .recommendation-card.active { display: block; } .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; } .card-title { font-size: 1.1em; font-weight: 600; color: #1D1D1F; } .card-controls { display: flex; gap: 8px; } .control-btn { width: 28px; height: 28px; background: transparent; border: none; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #86868B; font-size: 20px; transition: all 0.2s; } .control-btn:hover { background: rgba(0, 0, 0, 0.05); } /* MINI CARDS */ .mini-card { background: #F5F5F7; border-radius: 8px; padding: 16px; margin-bottom: 12px; } .mini-card-title { font-size: 0.9em; font-weight: 600; color: #1D1D1F; margin-bottom: 12px; display: flex; align-items: center; justify-content: space-between; } .form-section { margin-bottom: 24px; } .form-section-title { font-size: 0.75em; text-transform: uppercase; letter-spacing: 0.5px; color: #86868B; font-weight: 500; margin-bottom: 8px; } .input-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; } .input-grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; } .input-field { display: flex; flex-direction: column; gap: 4px; } .input-field label { font-size: 0.8em; color: #1D1D1F; font-weight: 400; } .input-field input { border: 1px solid #D1D1D6; border-radius: 6px; padding: 6px 10px; font-size: 0.9em; background: white; width: 100%; max-width: 100%; box-sizing: border-box; } .input-field input:focus { outline: none; border-color: #007AFF; box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1); } .dropdown-clean { border: 1px solid #D1D1D6; border-radius: 8px; padding: 10px 12px; background: white; font-size: 0.9em; color: #1D1D1F; width: 100%; appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%2386868B' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px; transition: all 0.2s; } .dropdown-clean:focus { outline: none; border-color: #007AFF; box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1); } /* DROPDOWN CUSTOMIZADO AMOSTRAS */ .dropdown-amostras-container { position: relative; width: 100%; } .dropdown-amostras-trigger { width: 100%; border: 1px solid #E5E7EB; border-radius: 12px; padding: 12px 16px; background: white; font-size: 0.95em; color: #1A1A1A; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.2s; } .dropdown-amostras-trigger:hover { border-color: #4ADE80; } .dropdown-amostras-trigger.active { border-color: #4ADE80; box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1); } .dropdown-amostras-trigger.active svg { transform: rotate(180deg); } .dropdown-amostras-trigger span { flex: 1; text-align: left; color: #6B7280; } .dropdown-amostras-trigger.has-selection span { color: #1A1A1A; font-weight: 500; } .dropdown-amostras-menu { position: absolute; top: 100%; right: 0; margin-top: 8px; background: white; border: 1px solid #E5E7EB; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); display: none; z-index: 1000; overflow: hidden; animation: dropdownSlide 0.2s ease-out; min-width: 280px; } .dropdown-amostras-menu.active { display: block; } @keyframes dropdownSlide { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } } .amostra-item { padding: 14px 16px; display: flex; align-items: center; gap: 12px; cursor: pointer; transition: all 0.15s; border-bottom: 1px solid #F3F4F6; } .amostra-item:last-child { border-bottom: none; } .amostra-item:hover { background: rgba(74, 222, 128, 0.05); } .amostra-item.selected { background: rgba(74, 222, 128, 0.1); } .amostra-item span { font-size: 0.95em; color: #1A1A1A; flex: 1; } .amostra-item.selected span { font-weight: 600; color: #4ADE80; } /* CHECKBOX CUSTOMIZADO */ .checkbox-custom { width: 20px; height: 20px; border: 2px solid #D1D5DB; border-radius: 6px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; flex-shrink: 0; } .amostra-item:hover .checkbox-custom { border-color: #4ADE80; } .amostra-item.selected .checkbox-custom { background: #4ADE80; border-color: #4ADE80; } .checkbox-custom .checkmark { opacity: 0; transform: scale(0.8); transition: all 0.2s; } .amostra-item.selected .checkbox-custom .checkmark { opacity: 1; transform: scale(1); } /* CARDS DE RECOMENDA√á√ÉO - ULTRA COMPACTO */ .card-recomendacao { background: #F9FAFB; border-left: 3px solid #4ADE80; border-radius: 8px; padding: 10px 12px; margin-top: 8px; margin-bottom: 8px; animation: slideDown 0.15s ease-out; } @keyframes slideDown { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } } .badge-metodo-mini { display: inline-block; background: #4ADE80; color: white; font-size: 0.65em; font-weight: 600; padding: 2px 6px; border-radius: 8px; text-transform: uppercase; letter-spacing: 0.3px; } /* DROPDOWNS COMPACTOS */ .select-micro { width: 100%; border: 1px solid #E5E7EB; border-radius: 8px; padding: 7px 10px; background: white; font-size: 0.8em; color: #1A1A1A; cursor: pointer; transition: all 0.2s; appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%239CA3AF' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; padding-right: 32px; } .select-micro:focus { outline: none; border-color: #4ADE80; box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1); } .select-micro:hover { border-color: #4ADE80; } /* ITENS ESCOLHIDOS - CLIC√ÅVEIS PARA EDITAR */ .chosen-item { display: flex; align-items: center; justify-content: space-between; background: white; border: 1px solid #4ADE80; border-radius: 8px; padding: 7px 10px; font-size: 0.8em; color: #1A1A1A; cursor: pointer; transition: all 0.2s; animation: fadeIn 0.2s ease-out; } .chosen-item:hover { background: rgba(74, 222, 128, 0.05); border-color: #22C55E; } .chosen-item:hover span:last-child { color: #4ADE80; } @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } } /* PILLS SELECION√ÅVEIS - ULTRA COMPACTAS */ .pill-opcao { display: inline-flex; align-items: center; gap: 3px; background: white; border: 1px solid #E5E7EB; border-radius: 12px; padding: 4px 10px; font-size: 0.75em; color: #6B7280; cursor: pointer; transition: all 0.15s; white-space: nowrap; } .pill-opcao:hover { border-color: #4ADE80; background: rgba(74, 222, 128, 0.05); color: #1A1A1A; transform: translateY(-1px); } .pill-opcao.selecionada { background: #4ADE80; border-color: #4ADE80; color: white; animation: pillPulse 0.3s ease-out; } @keyframes pillPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } } .pill-opcao.removida { opacity: 0; transform: scale(0.8); transition: all 0.2s; } /* CARDS DE TIPOS DE SOLO */ .card-tipo-solo { background: linear-gradient(135deg, #FFFFFF 0%, #F9FAFB 100%); border: 2px solid #E5E7EB; border-radius: 12px; padding: 14px; cursor: pointer; transition: all 0.3s; text-align: center; } .card-tipo-solo:hover { border-color: #4ADE80; transform: translateY(-3px); box-shadow: 0 6px 12px rgba(74, 222, 128, 0.15); } .card-tipo-solo.ativo { border-color: #4ADE80; background: linear-gradient(135deg, rgba(74, 222, 128, 0.05) 0%, rgba(74, 222, 128, 0.1) 100%); box-shadow: 0 4px 10px rgba(74, 222, 128, 0.2); } .tipo-solo-icon { font-size: 2.5em; margin-bottom: 6px; } .tipo-solo-nome { font-size: 0.85em; font-weight: 700; color: #1A1A1A; margin-bottom: 10px; letter-spacing: 0.5px; } .tipo-solo-desc { font-size: 0.7em; color: #6B7280; text-align: left; margin-bottom: 10px; line-height: 1.5; } .tipo-solo-desc div { margin-bottom: 3px; } .tipo-solo-composicao { background: rgba(0,0,0,0.02); border-radius: 6px; padding: 6px 8px; text-align: left; } /* BOT√ïES DE REG√äNCIA */ .btn-regencia { display: flex; flex-direction: column; align-items: center; gap: 4px; background: white; border: 1.5px solid #E5E7EB; border-radius: 8px; padding: 10px 8px; cursor: pointer; transition: all 0.2s; font-size: 0.8em; color: #6B7280; font-weight: 500; } .btn-regencia:hover { border-color: #4ADE80; background: rgba(74, 222, 128, 0.05); color: #1A1A1A; } .btn-regencia.active { border-color: #4ADE80; background: rgba(74, 222, 128, 0.1); color: #4ADE80; font-weight: 600; } /* SELECTS CUSTOMIZADOS */ .select-regencia, .select-fonte { width: 100%; border: 1px solid #E5E7EB; border-radius: 8px; padding: 10px 12px; background: white; font-size: 0.85em; color: #1A1A1A; cursor: pointer; transition: all 0.2s; } .select-regencia:focus, .select-fonte:focus { outline: none; border-color: #4ADE80; box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1); } .select-regencia { animation: fadeIn 0.2s ease-out; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } /* TAGS DE AMOSTRAS SELECIONADAS - ULTRA COMPACTAS */ .amostra-tag { display: inline-flex; align-items: center; gap: 4px; background: #4ADE80; border-radius: 12px; padding: 4px 10px; font-size: 0.75em; color: white; font-weight: 600; letter-spacing: 0.3px; animation: tagSlideIn 0.2s ease-out; white-space: nowrap; } @keyframes tagSlideIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } } .amostra-tag-remove { width: 14px; height: 14px; border-radius: 50%; background: rgba(255, 255, 255, 0.3); color: white; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.9em; font-weight: 700; padding: 0; margin-left: 2px; transition: all 0.2s; line-height: 1; } .amostra-tag-remove:hover { background: rgba(255, 255, 255, 0.5); transform: scale(1.1); } /* BOT√ÉO CIRCULAR + MICRONUTRIENTES */ .btn-add-micro { width: 28px; height: 28px; min-width: 28px; border-radius: 50%; background: white; border: 2px solid #D1D1D6; color: #86868B; font-size: 1.2em; font-weight: 300; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; position: relative; } .btn-add-micro:hover { border-color: #007AFF; color: #007AFF; background: #F0F9FF; } .btn-add-micro.active { background: #007AFF; color: white; border-color: #007AFF; transform: rotate(45deg); } /* DROPDOWN M√âTODOS MICRONUTRIENTES */ .metodos-micro-dropdown { position: absolute; top: 100%; right: 0; margin-top: 8px; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); border-radius: 8px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 8px 32px rgba(0, 0, 0, 0.08); overflow: hidden; display: none; z-index: 1000; min-width: 180px; animation: dropdownSlideDown 0.2s ease-out; } .metodos-micro-dropdown.active { display: block; } @keyframes dropdownSlideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .metodo-option { padding: 12px 16px; font-size: 0.9em; color: #1D1D1F; cursor: pointer; transition: background 0.15s; border-bottom: 1px solid #E5E5E7; } .metodo-option:last-child { border-bottom: none; } .metodo-option:hover { background: rgba(0, 122, 255, 0.08); } .metodo-option.selected { background: rgba(0, 122, 255, 0.12); color: #007AFF; font-weight: 500; } @media (max-width: 768px) { .header-grid, .button-group { grid-template-columns: 1fr; } .input-grid-3, .input-grid-2 { grid-template-columns: 1fr; } .metodos-micro-dropdown { right: auto; left: 0; } } </style> </head> <body> <div class="container"> <!-- CABE√áALHO --> <div class="header-card"> <div class="header-grid"> <div class="input-group"> <label>Produtor</label> <input type="text" placeholder="Nome do produtor"> </div> <div class="input-group"> <label>Fazenda</label> <input type="text" placeholder="Nome da fazenda"> </div> <div class="input-group"> <label>Cidade</label> <input type="text" placeholder="Cidade/UF"> </div> <div class="input-group"> <label>Talh√£o</label> <input type="text" placeholder="Identifica√ß√£o do talh√£o"> </div> </div> </div> <!-- AMOSTRAS --> <div class="analysis-section"> <div style="display: flex; align-items: center; gap: 12px;"> <div class="section-title" style="margin-bottom: 0;">Amostras</div> <!-- Tags compactas inline --> <div id="amostrasSelecionadasTags" style="display: flex; flex-wrap: wrap; gap: 6px; flex: 1;"> <!-- Tags aparecem aqui --> </div> <!-- Bot√£o + --> <div style="position: relative;"> <button class="btn-add-micro" id="btnAmostras" onclick="toggleDropdownAmostras(event)">+</button> <!-- Dropdown --> <div class="dropdown-amostras-menu" id="amostrasMenu"> <div class="amostra-item" onclick="toggleAmostra('a1', 'A1', this, event)"> <div class="checkbox-custom"> <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none"> <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <span>Amostra 01 - Talh√£o A</span> </div> <div class="amostra-item" onclick="toggleAmostra('a2', 'A2', this, event)"> <div class="checkbox-custom"> <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none"> <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <span>Amostra 02 - Talh√£o B</span> </div> <div class="amostra-item" onclick="toggleAmostra('a3', 'A3', this, event)"> <div class="checkbox-custom"> <svg class="checkmark" width="14" height="11" viewBox="0 0 14 11" fill="none"> <path d="M1 5.5L5 9.5L13 1.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> </svg> </div> <span>Amostra 03 - Talh√£o C</span> </div> </div> </div> </div> </div> <!-- pH --> <div class="analysis-section"> <div class="section-title">pH e Interfer√™ncia na Absor√ß√£o</div> <div class="metric-row"> <span class="metric-label">pH</span> <input type="number" step="0.1" placeholder="0.0" min="0" max="14" oninput="updatePH(this)"> <div class="status-bar"> <div class="status-indicator" id="ph-indicator"></div> </div> </div> <div class="interference-grid"> <div class="nutrient-interference"> <div class="nutrient-name">N</div> <div class="interference-value interference-neutral" id="int-n">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">P</div> <div class="interference-value interference-neutral" id="int-p">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">K</div> <div class="interference-value interference-neutral" id="int-k">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Ca</div> <div class="interference-value interference-neutral" id="int-ca">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Mg</div> <div class="interference-value interference-neutral" id="int-mg">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">S</div> <div class="interference-value interference-neutral" id="int-s">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Fe</div> <div class="interference-value interference-neutral" id="int-fe">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Mn</div> <div class="interference-value interference-neutral" id="int-mn">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Zn</div> <div class="interference-value interference-neutral" id="int-zn">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Cu</div> <div class="interference-value interference-neutral" id="int-cu">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">B</div> <div class="interference-value interference-neutral" id="int-b">--</div> </div> <div class="nutrient-interference"> <div class="nutrient-name">Mo</div> <div class="interference-value interference-neutral" id="int-mo">--</div> </div> </div> </div> <!-- TEXTURA DO SOLO --> <div class="analysis-section"> <div class="section-title">Textura do Solo</div> <!-- Grid de Componentes --> <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Areia (%)</span> <input type="number" step="1" min="0" max="100" placeholder="0" id="inputAreia" oninput="updateAreia(this)"> <div class="status-bar" style="min-width: 80px; flex: 1;"> <div class="status-indicator" id="areia-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Silte (%)</span> <input type="number" step="1" min="0" max="100" placeholder="0" id="inputSilte" oninput="updateSilte(this)"> <div class="status-bar" style="min-width: 80px; flex: 1;"> <div class="status-indicator" id="silte-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Argila (%)</span> <input type="number" step="1" min="0" max="100" placeholder="0" id="inputArgila" oninput="updateArgila(this)"> <div class="status-bar" style="min-width: 80px; flex: 1;"> <div class="status-indicator" id="argila-indicator"></div> </div> </div> </div> <!-- Valida√ß√£o e Classe --> <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 12px; margin-bottom: 16px;"> <!-- Total --> <div style="padding: 10px 12px; background: white; border: 1px solid #E5E7EB; border-radius: 8px;"> <div style="font-size: 0.7em; color: #6B7280; margin-bottom: 4px;">Total</div> <div style="display: flex; align-items: center; gap: 6px;"> <span style="font-size: 1.3em; font-weight: 700; color: #1A1A1A;" id="totalTextura">0</span> <span style="font-size: 0.85em; color: #6B7280;">%</span> <span id="validacaoIcon" style="font-size: 1.1em;">‚óã</span> </div> </div> <!-- Classe Textural --> <div style="padding: 10px 12px; background: white; border: 1px solid #E5E7EB; border-radius: 8px;"> <div style="font-size: 0.7em; color: #6B7280; margin-bottom: 4px;">Classe Textural</div> <div style="font-size: 0.95em; font-weight: 600; color: #4ADE80;" id="classeTextural">-</div> </div> </div> <!-- Cards de Tipos de Solo --> <div style="margin-bottom: 12px;"> <div style="font-size: 0.75em; font-weight: 600; color: #6B7280; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px;"> Tipos de Solo Comuns </div> <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;"> <!-- Argiloso --> <div id="cardArgiloso" class="card-tipo-solo" onclick="aplicarTipoSolo('argiloso')"> <div class="tipo-solo-icon">üü´</div> <div class="tipo-solo-nome">ARGILOSO</div> <div class="tipo-solo-desc"> <div>‚Ä¢ Textura fina e f√©rtil</div> <div>‚Ä¢ Alta reten√ß√£o de √°gua</div> <div>‚Ä¢ Suscet√≠vel √† compacta√ß√£o</div> </div> <div class="tipo-solo-composicao"> <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div> <div style="font-size: 0.7em; font-weight: 600;">Argila: 35-60%</div> </div> </div> <!-- Arenoso --> <div id="cardArenoso" class="card-tipo-solo" onclick="aplicarTipoSolo('arenoso')"> <div class="tipo-solo-icon">üü®</div> <div class="tipo-solo-nome">ARENOSO</div> <div class="tipo-solo-desc"> <div>‚Ä¢ Gr√£os vis√≠veis</div> <div>‚Ä¢ Pouca reten√ß√£o de √°gua</div> <div>‚Ä¢ Aduba√ß√£o frequente</div> </div> <div class="tipo-solo-composicao"> <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div> <div style="font-size: 0.7em; font-weight: 600;">Areia: 70-90%</div> </div> </div> <!-- Siltoso --> <div id="cardSiltoso" class="card-tipo-solo" onclick="aplicarTipoSolo('siltoso')"> <div class="tipo-solo-icon">üüß</div> <div class="tipo-solo-nome">SILTOSO</div> <div class="tipo-solo-desc"> <div>‚Ä¢ Textura fina e lisa</div> <div>‚Ä¢ Fertilidade m√©dia</div> <div>‚Ä¢ Baixa estabilidade</div> </div> <div class="tipo-solo-composicao"> <div style="font-size: 0.65em; color: #9CA3AF; margin-bottom: 3px;">Composi√ß√£o t√≠pica:</div> <div style="font-size: 0.7em; font-weight: 600;">Silte: 60-80%</div> </div> </div> </div> </div> <!-- Dica --> <div style="padding: 8px 12px; background: rgba(59, 130, 246, 0.05); border-left: 3px solid #3B82F6; border-radius: 6px;"> <div style="font-size: 0.75em; color: #6B7280;"> <strong style="color: #3B82F6;">üí° Dica:</strong> Clique em um dos cards acima para aplicar valores t√≠picos daquele tipo de solo </div> </div> </div> <!-- SOMA DE BASES + Al + H --> <div class="analysis-section"> <div class="section-title">Soma de Bases e Acidez</div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Ca (cmolc/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" id="inputCa" oninput="updateCa(this); calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="ca-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Mg (cmolc/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" id="inputMg" oninput="updateMg(this); calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="mg-indicator"></div> </div> </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">K (cmolc/dm¬≥)</span> <input type="number" step="0.01" placeholder="0.00" id="inputK" oninput="updateK(this); calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="k-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Na (cmolc/dm¬≥)</span> <input type="number" step="0.01" placeholder="0.00" id="inputNa" oninput="calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="na-indicator"></div> </div> </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Al (cmolc/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" id="inputAl" oninput="updateAl(this); calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="al-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">H + Al (cmolc/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" id="inputHAl" oninput="updateHAl(this); calcularSBCTC()"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="hal-indicator"></div> </div> </div> </div> <!-- CARDS DE SB, CTC e V% - COMPACTOS --> <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 16px;"> <!-- SB (Soma de Bases) --> <div style="background: #4ADE80; border-radius: 8px; padding: 10px 12px; color: white;"> <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">SB</div> <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorSB">0.00</div> </div> <!-- CTC --> <div style="background: #3B82F6; border-radius: 8px; padding: 10px 12px; color: white;"> <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">CTC</div> <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorCTC">0.00</div> </div> <!-- V% --> <div style="background: #F59E0B; border-radius: 8px; padding: 10px 12px; color: white;"> <div style="font-size: 0.65em; text-transform: uppercase; letter-spacing: 0.3px; opacity: 0.85; margin-bottom: 2px;">V%</div> <div style="font-size: 1.4em; font-weight: 700; line-height: 1;" id="valorV">0</div> </div> </div> <!-- RELA√á√ïES DE BASES - LINHA √öNICA --> <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #F3F4F6;"> <div style="font-size: 0.7em; text-transform: uppercase; letter-spacing: 0.5px; color: #9CA3AF; margin-bottom: 10px;"> Rela√ß√µes de Bases </div> <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;"> <!-- Ca/Mg --> <div style="text-align: center;"> <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Ca/Mg</div> <div style="font-size: 1.3em; font-weight: 700; color: #4ADE80; margin-bottom: 4px;" id="relacaoCaMg">--</div> <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;"> <div id="barraCaMg" style="height: 100%; background: #4ADE80; width: 0%; transition: all 0.3s;"></div> </div> <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusCaMg">3-5</div> </div> <!-- Ca/K --> <div style="text-align: center;"> <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Ca/K</div> <div style="font-size: 1.3em; font-weight: 700; color: #3B82F6; margin-bottom: 4px;" id="relacaoCaK">--</div> <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;"> <div id="barraCaK" style="height: 100%; background: #3B82F6; width: 0%; transition: all 0.3s;"></div> </div> <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusCaK">10-30</div> </div> <!-- Mg/K --> <div style="text-align: center;"> <div style="font-size: 0.75em; color: #6B7280; margin-bottom: 4px;">Mg/K</div> <div style="font-size: 1.3em; font-weight: 700; color: #F59E0B; margin-bottom: 4px;" id="relacaoMgK">--</div> <div style="height: 4px; background: #F3F4F6; border-radius: 2px; overflow: hidden;"> <div id="barraMgK" style="height: 100%; background: #F59E0B; width: 0%; transition: all 0.3s;"></div> </div> <div style="font-size: 0.65em; color: #9CA3AF; margin-top: 3px;" id="statusMgK">3-10</div> </div> </div> </div> </div> <!-- ENXOFRE --> <div class="analysis-section"> <div class="section-title">Enxofre</div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">S (mg/dm¬≥)</span> <input type="number" step="1" placeholder="0" oninput="updateS(this)"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="s-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">P-rem (mg/L)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updatePrem(this)"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="prem-indicator"></div> </div> </div> </div> </div> <!-- BOT√ïES: CORRETIVO + POT√ÅSSIO --> <div class="button-group"> <div style="position: relative;"> <button class="recommend-btn" onclick="toggleMenuCorretivo()"> Adicionar Corretivo </button> <div class="floating-menu" id="correctiveMenu"> <div class="menu-item" onclick="toggleCorrective('dolomitico')"> <span>Calc√°rio Dolom√≠tico</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleCorrective('calcitico')"> <span>Calc√°rio Calc√≠tico</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleCorrective('gesso')"> <span>Gesso Agr√≠cola</span> <span class="checkmark">‚úì</span> </div> </div> </div> <div style="position: relative;"> <button class="recommend-btn" onclick="toggleMenuPotassio()"> Indicar Pot√°ssio </button> <div class="floating-menu" id="potassioMenu"> <div class="menu-item" onclick="toggleNutrient('potassio', 'autor')"> <span>Autor</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleNutrient('potassio', 'tecnologia')"> <span>Tecnologia</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleNutrient('potassio', 'cultivar')"> <span>Cultivar</span> <span class="checkmark">‚úì</span> </div> </div> </div> </div> <!-- CARD CALAGEM --> <div class="recommendation-card" id="cardCalagem"> <div class="card-header"> <div class="card-title">Calagem</div> <div class="card-controls"> <button class="control-btn" onclick="minimizeCard('cardCalagem')" title="Ocultar">‚àí</button> </div> </div> <div class="card-content" id="contentCalagem"> <div class="form-section"> <div class="form-section-title">M√©todos de Calagem</div> <select class="dropdown-clean"> <option value="">Selecione o m√©todo de calagem</option> <option value="albrecht">Equil√≠brio Albrecht</option> <option value="albrecht-mod">Equil√≠brio Albrecht Modificado (Y)</option> <option value="saturacao">Satura√ß√£o por Bases (V%)</option> <option value="embrapa">M√©todo tradicional (EMBRAPA)</option> <option value="ncpt">M√©todo NCpT</option> </select> </div> <div class="form-section"> <div class="form-section-title">N√≠vel Cr√≠tico (cmol/dm¬≥)</div> <div class="input-grid-3"> <div class="input-field"> <label>Ca</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Mg</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>K</label> <input type="number" step="0.01" placeholder="0.00"> </div> </div> </div> <div class="form-section"> <div class="form-section-title">Bases do Solo em %</div> <div class="input-grid-2"> <div class="input-field"> <label>Ca %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Mg %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>K %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>V % (Ca+Mg+K)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <div class="form-section"> <div class="form-section-title">Elevar % das Bases</div> <select class="dropdown-clean"> <option value="">Selecione a estrat√©gia</option> <option value="padrao">Seguir a recomenda√ß√£o padr√£o</option> <option value="elevar-nc">Elevar % das bases e sempre respeitar o NC</option> <option value="elevar-proporcao">Elevar % das bases e manter a propor√ß√£o escolhida</option> </select> </div> <div class="mini-card" id="miniDolomitico" style="display: none;"> <div class="mini-card-title"> Calc√°rio Dolom√≠tico <button class="control-btn" onclick="removeCorrective('dolomitico')" title="Remover">√ó</button> </div> <div class="input-grid-3"> <div class="input-field"> <label>Ca %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Mg %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Pr %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>PE %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>PRNT %</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> <div style="margin-top: 12px;"> <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;">Superf√≠cie</label> <select class="dropdown-clean"> <option value="">Selecione o tipo de superf√≠cie</option> <option value="superficial">Superficial</option> <option value="niveladora">Niveladora</option> </select> </div> </div> <div class="mini-card" id="miniCalcitico" style="display: none;"> <div class="mini-card-title"> Calc√°rio Calc√≠tico <button class="control-btn" onclick="removeCorrective('calcitico')" title="Remover">√ó</button> </div> <div class="input-grid-3"> <div class="input-field"> <label>Ca %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Mg %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Pr %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>PE %</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>PRNT %</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> <div style="margin-top: 12px;"> <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;">Superf√≠cie</label> <select class="dropdown-clean"> <option value="">Selecione o tipo de superf√≠cie</option> <option value="superficial">Superficial</option> <option value="niveladora">Niveladora</option> </select> </div> </div> </div> </div> <!-- CARD GESSO --> <div class="recommendation-card" id="cardGesso"> <div class="card-header"> <div class="card-title">Gesso Agr√≠cola</div> <div class="card-controls"> <button class="control-btn" onclick="minimizeCard('cardGesso')" title="Ocultar">‚àí</button> <button class="control-btn" onclick="removeCorrective('gesso')" title="Fechar">√ó</button> </div> </div> <div class="card-content" id="contentGesso"> <div class="form-section"> <div class="form-section-title">M√©todos de Gessagem</div> <div style="margin-bottom: 12px;"> <label style="font-size: 0.85em; color: #1D1D1F; display: block; margin-bottom: 6px;"> Recomenda√ß√£o de Aplica√ß√£o de Gesso <span style="color: #FF3B30;">*</span> </label> <select class="dropdown-clean"> <option value="">Selecione o m√©todo de gessagem</option> <option value="enxofre">Pela Necessidade de Enxofre (S)</option> <option value="calcio-aluminio">Pelo M√©todo da Necessidade de C√°lcio (Ca) e Redu√ß√£o de Alum√≠nio (Al)</option> <option value="sulfato">Pelo Teor de Sulfato (SO‚ÇÑ¬≤‚Åª) na √Ågua de Irriga√ß√£o</option> </select> </div> </div> <div class="form-section"> <div class="form-section-title">Caracter√≠sticas do Gesso</div> <div class="input-grid-2"> <div class="input-field"> <label>C√°lcio (Ca %)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Enxofre (S %)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> </div> </div> <!-- CARD POT√ÅSSIO --> <div class="recommendation-card" id="cardPotassio"> <div class="card-header"> <div class="card-title">üî∑ Indica√ß√£o de Pot√°ssio (K)</div> <div class="card-controls"> <button class="control-btn" onclick="minimizeCard('cardPotassio')" title="Ocultar">‚àí</button> <button class="control-btn" onclick="removeNutrient('potassio')" title="Fechar">√ó</button> </div> </div> <div class="card-content" id="contentPotassio"> <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; margin-bottom: 16px;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.9em; font-weight: 600; color: #1D1D1F;">Filtros de Reg√™ncia</span> <div style="display: flex; gap: 8px;"> <button class="control-btn" title="Duplicar">üìã</button> <button class="control-btn" title="Fechar">‚úï</button> </div> </div> <div class="input-grid-2" style="margin-bottom: 16px;"> <div class="input-field"> <label>Tipo de Reg√™ncia</label> <select class="dropdown-clean"> <option value="">Selecione o tipo</option> <option value="tecnologia">Tecnologia</option> <option value="autor">Autor</option> <option value="cultivar">Cultivar</option> </select> </div> <div class="input-field"> <label>Reg√™ncia Espec√≠fica</label> <select class="dropdown-clean"> <option value="">Selecione a op√ß√£o</option> </select> </div> </div> <div class="form-section"> <label style="font-size: 0.85em; color: #1D1D1F; font-weight: 500; display: block; margin-bottom: 8px;">M√©todo de Corre√ß√£o</label> <select class="dropdown-clean" id="metodoPotassio" onchange="toggleCamposCorrecaoPotassio()"> <option value="">Selecione o m√©todo</option> <option value="elevar-nc">Elevar pot√°ssio para N√≠vel cr√≠tico (n√≠vel cr√≠tico - solo)</option> <option value="producao">Produ√ß√£o - Planta inteira</option> <option value="exportacao">Exporta√ß√£o (Manuten√ß√£o)</option> <option value="correcao-planta">Corre√ß√£o (N√≠vel cr√≠tico) + planta inteira</option> <option value="correcao-exportacao">Corre√ß√£o (N√≠vel cr√≠tico) + Exporta√ß√£o</option> <option value="planta-solo">Planta inteira menos o pot√°ssio no solo</option> </select> </div> <!-- CAMPOS CONDICIONAIS: aparecem quando seleciona QUALQUER m√©todo --> <div id="camposCorrecaoPotassio" style="display: none; background: #E8F5E9; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #A5D6A7;"> <div class="input-grid-2"> <div class="input-field"> <label>Corre√ß√£o total do solo?</label> <select class="dropdown-clean" id="correcaoTotalPotassio" onchange="togglePercentualPotassio()"> <option value="">Selecione</option> <option value="sim">Sim</option> <option value="nao">N√£o</option> </select> </div> <div class="input-field" id="percentualPotassio" style="display: none;"> <label>Percentual personalizado (%)</label> <input type="number" step="0.1" placeholder="0.0" style="width: 100%;"> </div> </div> </div> <div class="input-grid-3" style="margin-top: 16px;"> <div class="input-field"> <label>N√≠vel Cr√≠tico</label> <select class="dropdown-clean"> <option value="">N√≠vel cr√≠tico</option> <option value="rs-ctc">RS - Capacidade de Troca Cati√¥nica (CTC) a pH 7,0</option> <option value="mg-mehlich">MG - N√≠vel cr√≠tico de 70 mg dm‚Åª¬≥ (m√©todo Mehlich-1)</option> <option value="sp-faixa">SP - Faixa adequada entre 0,16 e 0,30 cmolc dm‚Åª¬≥</option> <option value="cerrado">Cerrado brasileiro</option> </select> </div> <div class="input-field"> <label>Fertilizante p/ plantio/corre√ß√£o</label> <select class="dropdown-clean"> <option value="">Fertilizante</option> <option value="kcl">Cloreto de Pot√°ssio (KCl)</option> <option value="k2so4">Sulfato de Pot√°ssio (K‚ÇÇSO‚ÇÑ)</option> <option value="kno3">Nitrato de Pot√°ssio (KNO‚ÇÉ)</option> </select> </div> <div class="input-field"> <label>Tem outro nutriente?</label> <select class="dropdown-clean" id="outroNutrientePotassio" onchange="toggleNutrientesAdicionaisPotassio()"> <option value="">Outro nutriente</option> <option value="sim">Sim</option> <option value="nao">N√£o</option> </select> </div> </div> <!-- SISTEMA DE NUTRIENTES ADICIONAIS --> <div id="nutrientesAdicionaisPotassio" style="display: none; margin-top: 16px;"> <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; border: 1px solid #E5E5E7;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.85em; font-weight: 600; color: #1D1D1F;">Nutrientes Adicionais no Fertilizante</span> </div> <div id="listaNutrientesPotassio"> <!-- Nutrientes adicionados aparecer√£o aqui --> </div> <button onclick="adicionarNutrientePotassio()" style="background: transparent; border: none; color: #007AFF; font-size: 0.9em; cursor: pointer; display: flex; align-items: center; gap: 6px; padding: 8px 0; margin-top: 8px; transition: all 0.2s;" onmouseover="this.style.color='#0051D5'" onmouseout="this.style.color='#007AFF'"> <span style="font-size: 1.2em; font-weight: 300;">+</span> Adicionar nutriente </button> </div> </div> </div> </div> </div> <!-- F√ìSFORO --> <div class="analysis-section"> <div class="section-title">F√≥sforo</div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">P Mehlich (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updatePMehlich(this)"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="pmehlich-indicator"></div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">P Resina (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updatePResina(this)"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="presina-indicator"></div> </div> </div> </div> <div class="metric-row"> <span class="metric-label">PR %</span> <input type="number" step="0.1" placeholder="0.0" oninput="updatePR(this)"> <div class="status-bar" style="min-width: 120px; flex: 1;"> <div class="status-indicator" id="pr-indicator"></div> </div> </div> </div> <!-- BOT√ÉO F√ìSFORO --> <div style="position: relative; margin-top: 12px;"> <button class="recommend-btn" onclick="toggleMenuFosforo()"> Indicar F√≥sforo </button> <div class="floating-menu" id="fosforoMenu"> <div class="menu-item" onclick="toggleNutrient('fosforo', 'autor')"> <span>Autor</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleNutrient('fosforo', 'tecnologia')"> <span>Tecnologia</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleNutrient('fosforo', 'cultivar')"> <span>Cultivar</span> <span class="checkmark">‚úì</span> </div> </div> </div> <!-- CARD F√ìSFORO --> <div class="recommendation-card" id="cardFosforo"> <div class="card-header"> <div class="card-title">üî∑ Indica√ß√£o de F√≥sforo (P)</div> <div class="card-controls"> <button class="control-btn" onclick="minimizeCard('cardFosforo')" title="Ocultar">‚àí</button> <button class="control-btn" onclick="removeNutrient('fosforo')" title="Fechar">√ó</button> </div> </div> <div class="card-content" id="contentFosforo"> <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; margin-bottom: 16px;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.9em; font-weight: 600; color: #1D1D1F;">Filtros de Reg√™ncia</span> <div style="display: flex; gap: 8px;"> <button class="control-btn" title="Duplicar">üìã</button> <button class="control-btn" title="Fechar">‚úï</button> </div> </div> <div class="input-grid-2" style="margin-bottom: 16px;"> <div class="input-field"> <label>Tipo de Reg√™ncia</label> <select class="dropdown-clean"> <option value="">Selecione o tipo</option> <option value="tecnologia">Tecnologia</option> <option value="autor">Autor</option> <option value="cultivar">Cultivar</option> </select> </div> <div class="input-field"> <label>Reg√™ncia Espec√≠fica</label> <select class="dropdown-clean"> <option value="">Selecione a op√ß√£o</option> </select> </div> </div> <div class="form-section"> <label style="font-size: 0.85em; color: #1D1D1F; font-weight: 500; display: block; margin-bottom: 8px;">M√©todo de Corre√ß√£o</label> <select class="dropdown-clean" id="metodoFosforo" onchange="toggleCamposCorrecaoFosforo()"> <option value="">Selecione o m√©todo</option> <option value="elevar-nc">Elevar f√≥sforo para N√≠vel cr√≠tico (n√≠vel cr√≠tico - solo)</option> <option value="producao">Produ√ß√£o - Planta inteira</option> <option value="exportacao">Exporta√ß√£o (Manuten√ß√£o)</option> <option value="correcao-planta">Corre√ß√£o (N√≠vel cr√≠tico) + planta inteira</option> <option value="correcao-exportacao">Corre√ß√£o (N√≠vel cr√≠tico) + Exporta√ß√£o</option> <option value="planta-solo">Planta inteira menos o f√≥sforo no solo</option> </select> </div> <!-- CAMPOS CONDICIONAIS: aparecem quando seleciona QUALQUER m√©todo --> <div id="camposCorrecaoFosforo" style="display: none; background: #E8F5E9; padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid #A5D6A7;"> <div class="input-grid-2"> <div class="input-field"> <label>Corre√ß√£o total do solo?</label> <select class="dropdown-clean" id="correcaoTotalFosforo" onchange="togglePercentualFosforo()"> <option value="">Selecione</option> <option value="sim">Sim</option> <option value="nao">N√£o</option> </select> </div> <div class="input-field" id="percentualFosforo" style="display: none;"> <label>Percentual personalizado (%)</label> <input type="number" step="0.1" placeholder="0.0" style="width: 100%;"> </div> </div> </div> <div class="input-grid-3" style="margin-top: 16px;"> <div class="input-field"> <label>N√≠vel Cr√≠tico</label> <select class="dropdown-clean"> <option value="">N√≠vel cr√≠tico</option> <option value="boletim100">M√©todo do Boletim 100 ‚Äì IAC (SP)</option> <option value="cerrados">Manual dos Cerrados ‚Äì Embrapa</option> <option value="aproximacao">5¬™ Aproxima√ß√£o (Mehlich-1)</option> <option value="nicri">NiCri P com base no P-rem</option> </select> </div> <div class="input-field"> <label>Fertilizante p/ plantio/corre√ß√£o</label> <select class="dropdown-clean"> <option value="">Fertilizante</option> <option value="map">MAP (Monoam√¥nio Fosfato)</option> <option value="dap">DAP (Diam√¥nio Fosfato)</option> <option value="super-simples">Superfosfato Simples</option> <option value="super-triplo">Superfosfato Triplo</option> <option value="termofosfato">Termofosfato</option> </select> </div> <div class="input-field"> <label>Tem outro nutriente?</label> <select class="dropdown-clean" id="outroNutrienteFosforo" onchange="toggleNutrientesAdicionaisFosforo()"> <option value="">Outro nutriente</option> <option value="sim">Sim</option> <option value="nao">N√£o</option> </select> </div> </div> <!-- SISTEMA DE NUTRIENTES ADICIONAIS --> <div id="nutrientesAdicionaisFosforo" style="display: none; margin-top: 16px;"> <div style="background: #F5F5F7; padding: 16px; border-radius: 8px; border: 1px solid #E5E5E7;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.85em; font-weight: 600; color: #1D1D1F;">Nutrientes Adicionais no Fertilizante</span> </div> <div id="listaNutrientesFosforo"> <!-- Nutrientes adicionados aparecer√£o aqui --> </div> <button onclick="adicionarNutrienteFosforo()" style="background: transparent; border: none; color: #007AFF; font-size: 0.9em; cursor: pointer; display: flex; align-items: center; gap: 6px; padding: 8px 0; margin-top: 8px; transition: all 0.2s;" onmouseover="this.style.color='#0051D5'" onmouseout="this.style.color='#007AFF'"> <span style="font-size: 1.2em; font-weight: 300;">+</span> Adicionar nutriente </button> </div> </div> </div> </div> </div> <!-- MICRONUTRIENTES --> <div class="analysis-section"> <div class="section-title">Micronutrientes</div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Fe (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updateFe(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="fe-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnFe" onclick="toggleMetodosMicro('fe', event)">+</button> <div class="metodos-micro-dropdown" id="metodosFe"> <div class="metodo-option" onclick="selecionarMetodoMicro('fe', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('fe', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('fe', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Mn (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updateMn(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="mn-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnMn" onclick="toggleMetodosMicro('mn', event)">+</button> <div class="metodos-micro-dropdown" id="metodosMn"> <div class="metodo-option" onclick="selecionarMetodoMicro('mn', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('mn', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('mn', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> </div> <!-- Card de Recomenda√ß√£o Fe (aparece quando seleciona m√©todo) --> <div id="cardRecomendacaoFe" class="card-recomendacao" style="display: none;"> <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;"> <div style="display: flex; align-items: center; gap: 6px;"> <span style="font-size: 0.85em; font-weight: 600; color: #1A1A1A;">Fe</span> <span id="badgeMetodoFe" class="badge-metodo-mini">Solo</span> </div> <button onclick="fecharRecomendacao('fe')" style="background: none; border: none; color: #D1D5DB; cursor: pointer; font-size: 1.1em; padding: 0;">√ó</button> </div> <!-- Reg√™ncia --> <div id="regenciaSelectFe" style="margin-bottom: 6px;"> <select class="select-micro" onchange="selecionarRegenciaTipo('fe', this.value)"> <option value="">Tipo de reg√™ncia...</option> <option value="autor">üìö Autor/Refer√™ncia</option> <option value="tecnologia">‚öôÔ∏è Tecnologia</option> <option value="cultivar">üå± Cultivar</option> </select> </div> <div id="regenciaChosenFe" class="chosen-item" style="display: none;" onclick="editarRegenciaTipo('fe')"> <span id="regenciaChosenTextFe"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <!-- Reg√™ncia Espec√≠fica --> <div id="especificaSelectFe" style="display: none; margin-bottom: 6px;"> <select class="select-micro" id="selectEspecificaFe" onchange="selecionarRegenciaEspecifica('fe', this.value)"> <option value="">Selecione...</option> </select> </div> <div id="especificaChosenFe" class="chosen-item" style="display: none;" onclick="editarRegenciaEspecifica('fe')"> <span id="especificaChosenTextFe"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <!-- Fonte --> <div id="fonteSelectFe" style="display: none; margin-bottom: 6px;"> <select class="select-micro" onchange="selecionarFonte('fe', this.value)"> <option value="">Fonte...</option> <option value="sulfato-ferroso">Sulfato Ferroso (FeSO‚ÇÑ)</option> <option value="quelato-fe">Quelato de Fe (Fe-EDTA)</option> <option value="oxido-ferrico">√ìxido F√©rrico (Fe‚ÇÇO‚ÇÉ)</option> </select> </div> <div id="fonteChosenFe" class="chosen-item" style="display: none;" onclick="editarFonte('fe')"> <span id="fonteChosenTextFe"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <!-- Status --> <div id="statusFe" style="display: none; margin-top: 6px; padding: 6px 8px; background: rgba(74, 222, 128, 0.05); border-radius: 6px; font-size: 0.7em; color: #22C55E;"> ‚úì Completo </div> </div> <!-- Card de Recomenda√ß√£o Mn --> <div id="cardRecomendacaoMn" class="card-recomendacao" style="display: none;"> <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;"> <div style="display: flex; align-items: center; gap: 6px;"> <span style="font-size: 0.85em; font-weight: 600; color: #1A1A1A;">Mn</span> <span id="badgeMetodoMn" class="badge-metodo-mini">Solo</span> </div> <button onclick="fecharRecomendacao('mn')" style="background: none; border: none; color: #D1D5DB; cursor: pointer; font-size: 1.1em; padding: 0;">√ó</button> </div> <div id="regenciaSelectMn" style="margin-bottom: 6px;"> <select class="select-micro" onchange="selecionarRegenciaTipo('mn', this.value)"> <option value="">Tipo de reg√™ncia...</option> <option value="autor">üìö Autor/Refer√™ncia</option> <option value="tecnologia">‚öôÔ∏è Tecnologia</option> <option value="cultivar">üå± Cultivar</option> </select> </div> <div id="regenciaChosenMn" class="chosen-item" style="display: none;" onclick="editarRegenciaTipo('mn')"> <span id="regenciaChosenTextMn"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <div id="especificaSelectMn" style="display: none; margin-bottom: 6px;"> <select class="select-micro" id="selectEspecificaMn" onchange="selecionarRegenciaEspecifica('mn', this.value)"> <option value="">Selecione...</option> </select> </div> <div id="especificaChosenMn" class="chosen-item" style="display: none;" onclick="editarRegenciaEspecifica('mn')"> <span id="especificaChosenTextMn"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <div id="fonteSelectMn" style="display: none; margin-bottom: 6px;"> <select class="select-micro" onchange="selecionarFonte('mn', this.value)"> <option value="">Fonte...</option> <option value="sulfato-manganes">Sulfato de Mangan√™s (MnSO‚ÇÑ)</option> <option value="quelato-mn">Quelato de Mn (Mn-EDTA)</option> <option value="oxido-manganes">√ìxido de Mangan√™s (MnO)</option> </select> </div> <div id="fonteChosenMn" class="chosen-item" style="display: none;" onclick="editarFonte('mn')"> <span id="fonteChosenTextMn"></span> <span style="font-size: 0.7em; color: #9CA3AF;">‚úé</span> </div> <div id="statusMn" style="display: none; margin-top: 6px; padding: 6px 8px; background: rgba(74, 222, 128, 0.05); border-radius: 6px; font-size: 0.7em; color: #22C55E;"> ‚úì Completo </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Zn (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updateZn(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="zn-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnZn" onclick="toggleMetodosMicro('zn', event)">+</button> <div class="metodos-micro-dropdown" id="metodosZn"> <div class="metodo-option" onclick="selecionarMetodoMicro('zn', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('zn', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('zn', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Cu (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updateCu(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="cu-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnCu" onclick="toggleMetodosMicro('cu', event)">+</button> <div class="metodos-micro-dropdown" id="metodosCu"> <div class="metodo-option" onclick="selecionarMetodoMicro('cu', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('cu', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('cu', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 12px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">B (mg/dm¬≥)</span> <input type="number" step="0.1" placeholder="0.0" oninput="updateB(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="b-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnB" onclick="toggleMetodosMicro('b', event)">+</button> <div class="metodos-micro-dropdown" id="metodosB"> <div class="metodo-option" onclick="selecionarMetodoMicro('b', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('b', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('b', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Mo (mg/dm¬≥)</span> <input type="number" step="0.01" placeholder="0.00" oninput="updateMo(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="mo-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnMo" onclick="toggleMetodosMicro('mo', event)">+</button> <div class="metodos-micro-dropdown" id="metodosMo"> <div class="metodo-option" onclick="selecionarMetodoMicro('mo', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('mo', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('mo', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Ni (mg/dm¬≥)</span> <input type="number" step="0.01" placeholder="0.00" oninput="updateNi(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="ni-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnNi" onclick="toggleMetodosMicro('ni', event)">+</button> <div class="metodos-micro-dropdown" id="metodosNi"> <div class="metodo-option" onclick="selecionarMetodoMicro('ni', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('ni', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('ni', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> <div class="metric-row" style="margin-bottom: 0;"> <span class="metric-label">Se (mg/dm¬≥)</span> <input type="number" step="0.01" placeholder="0.00" oninput="updateSe(this)"> <div class="status-bar" style="min-width: 100px; flex: 1;"> <div class="status-indicator" id="se-indicator"></div> </div> <div style="position: relative;"> <button class="btn-add-micro" id="btnSe" onclick="toggleMetodosMicro('se', event)">+</button> <div class="metodos-micro-dropdown" id="metodosSe"> <div class="metodo-option" onclick="selecionarMetodoMicro('se', 'solo', event)">Solo</div> <div class="metodo-option" onclick="selecionarMetodoMicro('se', 'foliar', event)">Aplica√ß√£o Foliar</div> <div class="metodo-option" onclick="selecionarMetodoMicro('se', 'solo-foliar', event)">Solo e Aplica√ß√£o Foliar</div> </div> </div> </div> </div> </div> <!-- BOT√ÉO MICRONUTRIENTES --> <div style="position: relative; margin-top: 12px;"> <button class="recommend-btn" onclick="toggleMenuMicro()"> Indicar Micronutrientes </button> <div class="floating-menu" id="microMenu"> <div class="menu-item" onclick="toggleMicro('fe')"> <span>Ferro (Fe)</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleMicro('mn')"> <span>Mangan√™s (Mn)</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleMicro('zn')"> <span>Zinco (Zn)</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleMicro('cu')"> <span>Cobre (Cu)</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleMicro('b')"> <span>Boro (B)</span> <span class="checkmark">‚úì</span> </div> <div class="menu-item" onclick="toggleMicro('mo')"> <span>Molibd√™nio (Mo)</span> <span class="checkmark">‚úì</span> </div> </div> </div> <!-- CARD MICRONUTRIENTES --> <div class="recommendation-card" id="cardMicro"> <div class="card-header"> <div class="card-title">Indica√ß√£o de Micronutrientes</div> <div class="card-controls"> <button class="control-btn" onclick="minimizeCard('cardMicro')" title="Ocultar">‚àí</button> <button class="control-btn" onclick="removeMicro()" title="Fechar">√ó</button> </div> </div> <div class="card-content" id="contentMicro"> <!-- FERRO --> <div class="mini-card" id="microFe" style="display: none;"> <div class="mini-card-title"> Ferro (Fe) <button class="control-btn" onclick="toggleMicro('fe')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="fe-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="fe-solo" style="width: auto;"> Solo </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="fe-fonte"> <option value="">Selecione a fonte</option> <option value="sulfato">Sulfato Ferroso (19-23% Fe)</option> <option value="quelato">Quelato de Ferro (6-14% Fe)</option> <option value="oxido">√ìxido de Ferro (60-70% Fe)</option> <option value="eddha">Fe-EDDHA (6% Fe)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (kg/ha)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Teor de Fe (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <!-- MANGAN√äS --> <div class="mini-card" id="microMn" style="display: none;"> <div class="mini-card-title"> Mangan√™s (Mn) <button class="control-btn" onclick="toggleMicro('mn')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="mn-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="mn-solo" style="width: auto;"> Solo </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="mn-fonte"> <option value="">Selecione a fonte</option> <option value="sulfato">Sulfato de Mangan√™s (26-28% Mn)</option> <option value="quelato">Quelato de Mangan√™s (12% Mn)</option> <option value="oxido">√ìxido de Mangan√™s (41-68% Mn)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (kg/ha)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Teor de Mn (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <!-- ZINCO --> <div class="mini-card" id="microZn" style="display: none;"> <div class="mini-card-title"> Zinco (Zn) <button class="control-btn" onclick="toggleMicro('zn')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="zn-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="zn-solo" style="width: auto;"> Solo </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="zn-fonte"> <option value="">Selecione a fonte</option> <option value="sulfato">Sulfato de Zinco (20-22% Zn)</option> <option value="quelato">Quelato de Zinco (14% Zn)</option> <option value="oxido">√ìxido de Zinco (50-80% Zn)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (kg/ha)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Teor de Zn (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <!-- COBRE --> <div class="mini-card" id="microCu" style="display: none;"> <div class="mini-card-title"> Cobre (Cu) <button class="control-btn" onclick="toggleMicro('cu')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="cu-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="cu-solo" style="width: auto;"> Solo </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="cu-fonte"> <option value="">Selecione a fonte</option> <option value="sulfato">Sulfato de Cobre (13-25% Cu)</option> <option value="quelato">Quelato de Cobre (13% Cu)</option> <option value="oxido">√ìxido de Cobre (75-89% Cu)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (kg/ha)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Teor de Cu (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <!-- BORO --> <div class="mini-card" id="microB" style="display: none;"> <div class="mini-card-title"> Boro (B) <button class="control-btn" onclick="toggleMicro('b')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="b-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="b-solo" style="width: auto;"> Solo </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="b-fonte"> <option value="">Selecione a fonte</option> <option value="acido">√Åcido B√≥rico (17% B)</option> <option value="borax">B√≥rax (11% B)</option> <option value="ulexita">Ulexita (10-12% B)</option> <option value="colemanita">Colemanita (10-15% B)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (kg/ha)</label> <input type="number" step="0.1" placeholder="0.0"> </div> <div class="input-field"> <label>Teor de B (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> <!-- MOLIBD√äNIO --> <div class="mini-card" id="microMo" style="display: none;"> <div class="mini-card-title"> Molibd√™nio (Mo) <button class="control-btn" onclick="toggleMicro('mo')" title="Remover">√ó</button> </div> <div class="form-section"> <div class="form-section-title">Forma de Aplica√ß√£o</div> <div class="input-grid-3"> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="mo-foliar" style="width: auto;"> Foliar </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="mo-solo" style="width: auto;"> Solo </label> <label style="display: flex; align-items: center; gap: 8px; font-size: 0.9em;"> <input type="checkbox" id="mo-semente" style="width: auto;"> Semente </label> </div> </div> <div class="form-section"> <div class="form-section-title">Fonte do Nutriente</div> <select class="dropdown-clean" id="mo-fonte"> <option value="">Selecione a fonte</option> <option value="molibdato-sodio">Molibdato de S√≥dio (39% Mo)</option> <option value="molibdato-amonio">Molibdato de Am√¥nio (54% Mo)</option> <option value="trioxido">Tri√≥xido de Molibd√™nio (66% Mo)</option> </select> </div> <div class="input-grid-2"> <div class="input-field"> <label>Dose Recomendada (g/ha)</label> <input type="number" step="1" placeholder="0"> </div> <div class="input-field"> <label>Teor de Mo (%)</label> <input type="number" step="0.1" placeholder="0.0"> </div> </div> </div> </div> </div> </div> <script> // ======================================== // DROPDOWN CUSTOMIZADO - AMOSTRAS // ======================================== const amostrasSelecionadas = new Map(); // id -> nome function toggleDropdownAmostras(event) { event.stopPropagation(); const menu = document.getElementById('amostrasMenu'); const btn = document.getElementById('btnAmostras'); // Fecha todos os outros dropdowns de micronutrientes document.querySelectorAll('.metodos-micro-dropdown').forEach(d => { d.classList.remove('active'); }); document.querySelectorAll('.btn-add-micro').forEach(b => { if (b.id !== 'btnAmostras') { b.classList.remove('active'); } }); menu.classList.toggle('active'); btn.classList.toggle('active'); } function toggleAmostra(id, nome, element, event) { event.stopPropagation(); element.classList.toggle('selected'); if (amostrasSelecionadas.has(id)) { amostrasSelecionadas.delete(id); } else { amostrasSelecionadas.set(id, nome); } renderAmostrasTags(); } function removerAmostra(id) { amostrasSelecionadas.delete(id); // Desmarca checkbox const items = document.querySelectorAll('.amostra-item'); items.forEach(item => { const onclick = item.getAttribute('onclick'); if (onclick && onclick.includes('${id}')) { item.classList.remove('selected'); } }); renderAmostrasTags(); } function renderAmostrasTags() { const container = document.getElementById('amostrasSelecionadasTags'); if (amostrasSelecionadas.size === 0) { container.innerHTML = '<span style="color: #D1D5DB; font-size: 0.8em; font-style: italic;">Nenhuma</span>'; return; } let html = ''; amostrasSelecionadas.forEach((nome, id) => { html += <div class="amostra-tag"> <span>${nome}</span> <button class="amostra-tag-remove" onclick="removerAmostra('${id}')">√ó</button> </div> ; }); container.innerHTML = html; } // Inicializa document.addEventListener('DOMContentLoaded', function() { renderAmostrasTags(); }); // ======================================== // RANGES AGRON√îMICOS REAIS // ======================================== const ranges = { ph: { min: 4.0, baixo: 5.0, medio: 5.5, adequado: 6.0, alto: 7.0, max: 8.0 }, areia: { min: 0, baixo: 20, medio: 40, adequado: 60, alto: 80, max: 100 }, silte: { min: 0, baixo: 10, medio: 20, adequado: 30, alto: 50, max: 100 }, argila: { min: 0, baixo: 20, medio: 35, adequado: 50, alto: 70, max: 100 }, ca: { min: 0, baixo: 2.0, medio: 4.0, adequado: 6.0, alto: 8.0, max: 12.0 }, mg: { min: 0, baixo: 0.5, medio: 1.0, adequado: 1.5, alto: 3.0, max: 5.0 }, k: { min: 0, baixo: 0.15, medio: 0.30, adequado: 0.50, alto: 0.80, max: 1.5 }, na: { min: 0, baixo: 0.05, medio: 0.10, adequado: 0.15, alto: 0.30, max: 1.0 }, al: { min: 0, baixo: 0.3, medio: 0.5, adequado: 0, alto: 0, max: 3.0 }, // Al invertido hal: { min: 0, baixo: 2.0, medio: 4.0, adequado: 6.0, alto: 8.0, max: 12.0 }, // H+Al invertido s: { min: 0, baixo: 5, medio: 10, adequado: 15, alto: 25, max: 50 }, prem: { min: 0, baixo: 20, medio: 30, adequado: 40, alto: 50, max: 80 }, pmehlich: { min: 0, baixo: 10, medio: 20, adequado: 30, alto: 50, max: 100 }, presina: { min: 0, baixo: 15, medio: 25, adequado: 40, alto: 60, max: 120 }, pr: { min: 0, baixo: 30, medio: 50, adequado: 70, alto: 90, max: 100 }, // Micronutrientes (mg/dm¬≥) fe: { min: 0, baixo: 5, medio: 12, adequado: 20, alto: 45, max: 100 }, mn: { min: 0, baixo: 2, medio: 5, adequado: 10, alto: 20, max: 50 }, zn: { min: 0, baixo: 0.5, medio: 1.2, adequado: 2.0, alto: 5.0, max: 15.0 }, cu: { min: 0, baixo: 0.3, medio: 0.8, adequado: 1.5, alto: 3.0, max: 10.0 }, b: { min: 0, baixo: 0.2, medio: 0.4, adequado: 0.6, alto: 1.2, max: 3.0 }, mo: { min: 0, baixo: 0.10, medio: 0.20, adequado: 0.30, alto: 0.50, max: 1.0 }, ni: { min: 0, baixo: 0.05, medio: 0.10, adequado: 0.20, alto: 0.40, max: 1.0 }, se: { min: 0, baixo: 0.02, medio: 0.05, adequado: 0.10, alto: 0.20, max: 0.5 } }; // ======================================== // FUN√á√ÉO GEN√âRICA PARA ATUALIZAR INDICADOR // ======================================== function updateIndicator(value, range, indicatorId, inverted = false) { const indicator = document.getElementById(indicatorId); if (!indicator) return; let status = ''; let width = 0; if (inverted) { // Para Al e H+Al (quanto menor, melhor) if (value <= range.adequado) { status = 'adequado'; width = 80; } else if (value <= range.medio) { status = 'medio'; width = 60; } else if (value <= range.baixo) { status = 'baixo'; width = 40; } else { status = 'muito-baixo'; width = 20; } } else { // L√≥gica normal if (value < range.baixo) { status = 'muito-baixo'; width = (value / range.baixo) * 20; } else if (value < range.medio) { status = 'baixo'; width = 20 + ((value - range.baixo) / (range.medio - range.baixo)) * 20; } else if (value < range.adequado) { status = 'medio'; width = 40 + ((value - range.medio) / (range.adequado - range.medio)) * 20; } else if (value < range.alto) { status = 'adequado'; width = 60 + ((value - range.adequado) / (range.alto - range.adequado)) * 20; } else { status = 'alto'; width = 80 + ((value - range.alto) / (range.max - range.alto)) * 20; } } width = Math.min(Math.max(width, 0), 100); indicator.className = 'status-indicator indicator-' + status; indicator.style.width = width + '%'; } // ======================================== // FUN√á√ïES DE ATUALIZA√á√ÉO PARA CADA M√âTRICA // ======================================== function updatePH(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.ph, 'ph-indicator'); updateInterference(value); } function updateArgila(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.argila, 'argila-indicator'); calcularTextura(); } function updateAreia(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.areia, 'areia-indicator'); calcularTextura(); } function updateSilte(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.silte, 'silte-indicator'); calcularTextura(); } // ======================================== // CALCULADORA DE TEXTURA DO SOLO // ======================================== function calcularTextura() { // Pega valores dos inputs usando IDs const areia = parseFloat(document.getElementById('inputAreia')?.value) || 0; const silte = parseFloat(document.getElementById('inputSilte')?.value) || 0; const argila = parseFloat(document.getElementById('inputArgila')?.value) || 0; const total = areia + silte + argila; // Atualiza display de total const totalElem = document.getElementById('totalTextura'); if (totalElem) { totalElem.textContent = total.toFixed(0); } // Atualiza √≠cone de valida√ß√£o const validIcon = document.getElementById('validacaoIcon'); if (validIcon) { if (total === 100) { validIcon.textContent = '‚úì'; validIcon.style.color = '#4ADE80'; } else if (total > 0) { validIcon.textContent = '‚ö†'; validIcon.style.color = '#F59E0B'; } else { validIcon.textContent = '‚óã'; validIcon.style.color = '#D1D5DB'; } } // Calcula classe textural let classe = '-'; if (total === 100) { if (argila >= 60) { classe = 'Muito Argilosa'; } else if (argila >= 35) { classe = 'Argilosa'; } else if (argila >= 15) { if (areia >= 45) { classe = 'Franco-Arenosa'; } else if (silte >= 40) { classe = 'Franco-Siltosa'; } else { classe = 'Franca'; } } else { if (areia >= 85) { classe = 'Arenosa'; } else if (silte >= 50) { classe = 'Siltosa'; } else { classe = 'Franco-Arenosa'; } } } const classeElem = document.getElementById('classeTextural'); if (classeElem) { classeElem.textContent = classe; } } // Fun√ß√£o para aplicar tipos de solo function aplicarTipoSolo(tipo) { const tipos = { argiloso: { areia: 30, silte: 20, argila: 50 }, arenoso: { areia: 80, silte: 10, argila: 10 }, siltoso: { areia: 15, silte: 70, argila: 15 } }; const valores = tipos[tipo]; document.getElementById('inputAreia').value = valores.areia; document.getElementById('inputSilte').value = valores.silte; document.getElementById('inputArgila').value = valores.argila; // Atualiza indicadores updateIndicator(valores.areia, ranges.areia, 'areia-indicator'); updateIndicator(valores.silte, ranges.silte, 'silte-indicator'); updateIndicator(valores.argila, ranges.argila, 'argila-indicator'); // Remove ativo de todos os cards document.querySelectorAll('.card-tipo-solo').forEach(card => { card.classList.remove('ativo'); }); // Adiciona ativo ao card clicado const cardId = 'card' + tipo.charAt(0).toUpperCase() + tipo.slice(1); document.getElementById(cardId)?.classList.add('ativo'); // Recalcula textura calcularTextura(); } function updateCa(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.ca, 'ca-indicator'); } function updateMg(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.mg, 'mg-indicator'); } function updateK(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.k, 'k-indicator'); } function updateNa(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.na, 'na-indicator'); } function updateAl(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.al, 'al-indicator', true); } function updateHAl(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.hal, 'hal-indicator', true); } function updateS(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.s, 's-indicator'); } function updatePrem(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.prem, 'prem-indicator'); } function updatePMehlich(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.pmehlich, 'pmehlich-indicator'); } function updatePResina(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.presina, 'presina-indicator'); } function updatePR(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.pr, 'pr-indicator'); } function updatePremFosforo(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.prem, 'prem-fosforo-indicator'); } function updateFe(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.fe, 'fe-indicator'); } function updateMn(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.mn, 'mn-indicator'); } function updateZn(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.zn, 'zn-indicator'); } function updateCu(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.cu, 'cu-indicator'); } function updateB(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.b, 'b-indicator'); } function updateMo(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.mo, 'mo-indicator'); } // Micronutrientes function updateFe(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.fe, 'fe-indicator'); } function updateMn(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.mn, 'mn-indicator'); } function updateZn(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.zn, 'zn-indicator'); } function updateCu(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.cu, 'cu-indicator'); } function updateB(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.b, 'b-indicator'); } function updateMo(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.mo, 'mo-indicator'); } function updateNi(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.ni, 'ni-indicator'); } function updateSe(input) { const value = parseFloat(input.value) || 0; updateIndicator(value, ranges.se, 'se-indicator'); } // ======================================== // C√ÅLCULOS: SB, CTC, V% E RELA√á√ïES // ======================================== function calcularSBCTC() { const ca = parseFloat(document.getElementById('inputCa')?.value) || 0; const mg = parseFloat(document.getElementById('inputMg')?.value) || 0; const k = parseFloat(document.getElementById('inputK')?.value) || 0; const na = parseFloat(document.getElementById('inputNa')?.value) || 0; const al = parseFloat(document.getElementById('inputAl')?.value) || 0; const hal = parseFloat(document.getElementById('inputHAl')?.value) || 0; // SB = Ca + Mg + K + Na const sb = ca + mg + k + na; // CTC = SB + (H + Al) const ctc = sb + hal; // V% = (SB / CTC) * 100 const v = ctc > 0 ? (sb / ctc) * 100 : 0; // Atualiza displays document.getElementById('valorSB').textContent = sb.toFixed(2); document.getElementById('valorCTC').textContent = ctc.toFixed(2); document.getElementById('valorV').textContent = Math.round(v); // Calcula rela√ß√µes de bases calcularRelacoesBases(ca, mg, k); } function calcularRelacoesBases(ca, mg, k) { // Ca/Mg (ideal: 3-5) const caMg = mg > 0 ? ca / mg : 0; const caMgPercent = Math.min((caMg / 10) * 100, 100); // Max 10 para 100% document.getElementById('relacaoCaMg').textContent = mg > 0 ? caMg.toFixed(1) : '--'; document.getElementById('barraCaMg').style.width = caMgPercent + '%'; if (caMg >= 3 && caMg <= 5) { document.getElementById('statusCaMg').textContent = '‚úì'; document.getElementById('statusCaMg').style.color = '#4ADE80'; } else if (caMg > 0) { document.getElementById('statusCaMg').textContent = '3-5'; document.getElementById('statusCaMg').style.color = '#9CA3AF'; } else { document.getElementById('statusCaMg').textContent = '3-5'; } // Ca/K (ideal: 10-30) const caK = k > 0 ? ca / k : 0; const caKPercent = Math.min((caK / 50) * 100, 100); // Max 50 para 100% document.getElementById('relacaoCaK').textContent = k > 0 ? caK.toFixed(1) : '--'; document.getElementById('barraCaK').style.width = caKPercent + '%'; if (caK >= 10 && caK <= 30) { document.getElementById('statusCaK').textContent = '‚úì'; document.getElementById('statusCaK').style.color = '#3B82F6'; } else if (caK > 0) { document.getElementById('statusCaK').textContent = '10-30'; document.getElementById('statusCaK').style.color = '#9CA3AF'; } else { document.getElementById('statusCaK').textContent = '10-30'; } // Mg/K (ideal: 3-10) const mgK = k > 0 ? mg / k : 0; const mgKPercent = Math.min((mgK / 20) * 100, 100); // Max 20 para 100% document.getElementById('relacaoMgK').textContent = k > 0 ? mgK.toFixed(1) : '--'; document.getElementById('barraMgK').style.width = mgKPercent + '%'; if (mgK >= 3 && mgK <= 10) { document.getElementById('statusMgK').textContent = '‚úì'; document.getElementById('statusMgK').style.color = '#F59E0B'; } else if (mgK > 0) { document.getElementById('statusMgK').textContent = '3-10'; document.getElementById('statusMgK').style.color = '#9CA3AF'; } else { document.getElementById('statusMgK').textContent = '3-10'; } } // ======================================== // L√ìGICA DE INTERFER√äNCIA DO pH // ======================================== function updateInterference(ph) { const nutrients = { n: { optimal: [6.0, 7.0], range: [5.0, 8.0] }, p: { optimal: [6.0, 7.0], range: [5.5, 7.5] }, k: { optimal: [6.0, 7.5], range: [5.5, 8.0] }, ca: { optimal: [6.0, 7.5], range: [5.5, 8.5] }, mg: { optimal: [6.0, 8.0], range: [5.5, 8.5] }, s: { optimal: [5.5, 7.5], range: [5.0, 8.0] }, fe: { optimal: [5.0, 6.5], range: [4.5, 7.0] }, mn: { optimal: [5.0, 6.5], range: [4.5, 7.0] }, zn: { optimal: [5.0, 7.0], range: [4.5, 7.5] }, cu: { optimal: [5.0, 7.0], range: [4.5, 7.5] }, b: { optimal: [5.0, 7.0], range: [4.5, 8.0] }, mo: { optimal: [6.0, 8.0], range: [5.5, 8.5] } }; Object.keys(nutrients).forEach(nutrient => { const elem = document.getElementById('int-' + nutrient); const n = nutrients[nutrient]; let status = 'neutral'; let value = '--'; if (ph >= n.optimal[0] && ph <= n.optimal[1]) { status = 'positive'; value = '100%'; } else if (ph >= n.range[0] && ph <= n.range[1]) { status = 'neutral'; const distance = Math.min( Math.abs(ph - n.optimal[0]), Math.abs(ph - n.optimal[1]) ); const percentage = Math.max(50, 100 - (distance * 20)); value = Math.round(percentage) + '%'; } else { status = 'negative'; const distance = Math.min( Math.abs(ph - n.range[0]), Math.abs(ph - n.range[1]) ); const percentage = Math.max(10, 50 - (distance * 15)); value = Math.round(percentage) + '%'; } elem.textContent = value; elem.className = 'interference-value interference-' + status; }); } // ======================================== // CONTROLE DE MENUS // ======================================== function toggleMenuCorretivo() { const menu = document.getElementById('correctiveMenu'); menu.classList.toggle('active'); } function toggleMenuPotassio() { const menu = document.getElementById('potassioMenu'); menu.classList.toggle('active'); } function toggleMenuFosforo() { const menu = document.getElementById('fosforoMenu'); menu.classList.toggle('active'); } function toggleMenuMicro() { const menu = document.getElementById('microMenu'); menu.classList.toggle('active'); } // Fechar menus ao clicar fora document.addEventListener('click', function(event) { if (!event.target.closest('.button-group') && !event.target.closest('.floating-menu')) { document.querySelectorAll('.floating-menu').forEach(menu => { menu.classList.remove('active'); }); } }); // ======================================== // CONTROLE DE CORRETIVOS // ======================================== const selectedCorrectives = { dolomitico: false, calcitico: false, gesso: false }; function hasCalcarioSelected() { return selectedCorrectives.dolomitico || selectedCorrectives.calcitico; } function toggleCorrective(type) { const menuItem = event.currentTarget; selectedCorrectives[type] = !selectedCorrectives[type]; menuItem.classList.toggle('selected'); if (type === 'gesso') { const card = document.getElementById('cardGesso'); card.classList.toggle('active', selectedCorrectives.gesso); } else { const cardCalagem = document.getElementById('cardCalagem'); const miniCard = document.getElementById('mini' + type.charAt(0).toUpperCase() + type.slice(1)); if (selectedCorrectives[type]) { if (!cardCalagem.classList.contains('active')) { cardCalagem.classList.add('active'); } miniCard.style.display = 'block'; } else { miniCard.style.display = 'none'; if (!hasCalcarioSelected()) { cardCalagem.classList.remove('active'); } } } } function removeCorrective(type) { selectedCorrectives[type] = false; const menuItems = document.querySelectorAll('#correctiveMenu .menu-item'); menuItems.forEach(item => { const text = item.textContent.toLowerCase(); if ((text.includes('dolom√≠tico') && type === 'dolomitico') || (text.includes('calc√≠tico') && type === 'calcitico') || (text.includes('gesso') && type === 'gesso')) { item.classList.remove('selected'); } }); if (type === 'gesso') { document.getElementById('cardGesso').classList.remove('active'); } else { const miniCard = document.getElementById('mini' + type.charAt(0).toUpperCase() + type.slice(1)); miniCard.style.display = 'none'; if (!hasCalcarioSelected()) { document.getElementById('cardCalagem').classList.remove('active'); } } } // ======================================== // CONTROLE DE NUTRIENTES // ======================================== function toggleNutrient(type, category) { const menuItem = event.currentTarget; menuItem.classList.toggle('selected'); const menuId = type + 'Menu'; const cardId = 'card' + type.charAt(0).toUpperCase() + type.slice(1); const anySelected = document.querySelector('#' + menuId + ' .menu-item.selected'); document.getElementById(cardId).classList.toggle('active', anySelected !== null); } function removeNutrient(type) { const menuId = type + 'Menu'; document.querySelectorAll('#' + menuId + ' .menu-item').forEach(item => { item.classList.remove('selected'); }); const cardId = 'card' + type.charAt(0).toUpperCase() + type.slice(1); document.getElementById(cardId).classList.remove('active'); } // ======================================== // MINIMIZAR CARDS // ======================================== function minimizeCard(cardId) { const content = document.querySelector('#' + cardId + ' .card-content'); if (content.style.display === 'none') { content.style.display = 'block'; } else { content.style.display = 'none'; } } // ======================================== // CONTROLE DE MICRONUTRIENTES // ======================================== const selectedMicros = { fe: false, mn: false, zn: false, cu: false, b: false, mo: false }; function toggleMicro(type) { const menuItem = event.currentTarget; selectedMicros[type] = !selectedMicros[type]; menuItem.classList.toggle('selected'); const cardMicro = document.getElementById('cardMicro'); const miniCard = document.getElementById('micro' + type.charAt(0).toUpperCase() + type.slice(1)); if (selectedMicros[type]) { if (!cardMicro.classList.contains('active')) { cardMicro.classList.add('active'); } miniCard.style.display = 'block'; } else { miniCard.style.display = 'none'; // Se n√£o tem mais nenhum micro selecionado, ocultar card if (!hasMicroSelected()) { cardMicro.classList.remove('active'); } } } function hasMicroSelected() { return Object.values(selectedMicros).some(val => val === true); } function removeMicro(element) { selectedMicros[element] = false; // Remover sele√ß√£o do menu const menuItems = document.querySelectorAll('#microMenu .menu-item'); const names = { fe: 'ferro', mn: 'mangan√™s', zn: 'zinco', cu: 'cobre', b: 'boro', mo: 'molibd√™nio' }; menuItems.forEach(item => { const text = item.textContent.toLowerCase(); if (text.includes(names[element])) { item.classList.remove('selected'); } }); // Ocultar mini-card const miniCard = document.getElementById('miniMicro' + element.charAt(0).toUpperCase() + element.slice(1)); if (miniCard) miniCard.style.display = 'none'; // Se n√£o tem mais nenhum micro selecionado, fechar card if (!hasMicroSelected()) { document.getElementById('cardMicro').classList.remove('active'); } } function closeAllMicro() { Object.keys(selectedMicros).forEach(key => { selectedMicros[key] = false; }); document.querySelectorAll('#microMenu .menu-item').forEach(item => { item.classList.remove('selected'); }); document.querySelectorAll('[id^="miniMicro"]').forEach(mini => { mini.style.display = 'none'; }); document.getElementById('cardMicro').classList.remove('active'); } function hasMicroSelected() { return Object.values(selectedMicros).some(v => v === true); } // ======================================== // CAMPOS CONDICIONAIS - CORRE√á√ÉO TOTAL // ======================================== // POT√ÅSSIO function toggleCamposCorrecaoPotassio() { const metodo = document.getElementById('metodoPotassio'); const campos = document.getElementById('camposCorrecaoPotassio'); if (metodo && campos) { if (metodo.value !== '') { // Se selecionou algum m√©todo, mostra os campos campos.style.display = 'block'; } else { // Se est√° vazio, oculta tudo campos.style.display = 'none'; // Reset dos campos internos const correcaoTotal = document.getElementById('correcaoTotalPotassio'); const percentual = document.getElementById('percentualPotassio'); if (correcaoTotal) correcaoTotal.value = ''; if (percentual) percentual.style.display = 'none'; } } } function togglePercentualPotassio() { const correcaoTotal = document.getElementById('correcaoTotalPotassio'); const percentual = document.getElementById('percentualPotassio'); if (correcaoTotal && percentual) { if (correcaoTotal.value === 'nao') { percentual.style.display = 'block'; } else { percentual.style.display = 'none'; } } } // F√ìSFORO function toggleCamposCorrecaoFosforo() { const metodo = document.getElementById('metodoFosforo'); const campos = document.getElementById('camposCorrecaoFosforo'); if (metodo && campos) { if (metodo.value !== '') { campos.style.display = 'block'; } else { campos.style.display = 'none'; const correcaoTotal = document.getElementById('correcaoTotalFosforo'); const percentual = document.getElementById('percentualFosforo'); if (correcaoTotal) correcaoTotal.value = ''; if (percentual) percentual.style.display = 'none'; } } } function togglePercentualFosforo() { const correcaoTotal = document.getElementById('correcaoTotalFosforo'); const percentual = document.getElementById('percentualFosforo'); if (correcaoTotal && percentual) { if (correcaoTotal.value === 'nao') { percentual.style.display = 'block'; } else { percentual.style.display = 'none'; } } } // ======================================== // NUTRIENTES ADICIONAIS - POT√ÅSSIO // ======================================== let contadorNutrientesPotassio = 0; function toggleNutrientesAdicionaisPotassio() { const select = document.getElementById('outroNutrientePotassio'); const container = document.getElementById('nutrientesAdicionaisPotassio'); if (select && container) { if (select.value === 'sim') { container.style.display = 'block'; // Adiciona primeiro nutriente automaticamente se lista estiver vazia if (document.getElementById('listaNutrientesPotassio').children.length === 0) { adicionarNutrientePotassio(); } } else { container.style.display = 'none'; // Limpa lista document.getElementById('listaNutrientesPotassio').innerHTML = ''; contadorNutrientesPotassio = 0; } } } function adicionarNutrientePotassio() { contadorNutrientesPotassio++; const id = 'nutrientePotassio' + contadorNutrientesPotassio; const html = <div id="${id}" style="background: white; padding: 12px; border-radius: 8px; margin-bottom: 12px; border: 1px solid #E5E5E7;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.85em; color: #86868B;">Nutriente ${contadorNutrientesPotassio}</span> <button onclick="removerNutrientePotassio('${id}')" class="control-btn" title="Remover">√ó</button> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;"> <div> <label style="font-size: 0.8em; color: #1D1D1F; font-weight: 400; display: block; margin-bottom: 4px;">Nutriente</label> <select class="dropdown-clean"> <option value="">Selecione</option> <option value="n">Nitrog√™nio (N)</option> <option value="p">F√≥sforo (P‚ÇÇO‚ÇÖ)</option> <option value="s">Enxofre (S)</option> <option value="ca">C√°lcio (Ca)</option> <option value="mg">Magn√©sio (Mg)</option> </select> </div> <div> <label style="font-size: 0.8em; color: #1D1D1F; font-weight: 400; display: block; margin-bottom: 4px;">Teor (%)</label> <input type="number" step="0.1" placeholder="0.0" style="width: 100%; border: 1px solid #D1D1D6; border-radius: 6px; padding: 6px 10px; font-size: 0.9em; background: white;"> </div> </div> </div> ; document.getElementById('listaNutrientesPotassio').insertAdjacentHTML('beforeend', html); } function removerNutrientePotassio(id) { const elemento = document.getElementById(id); if (elemento) { elemento.remove(); } } // ======================================== // NUTRIENTES ADICIONAIS - F√ìSFORO // ======================================== let contadorNutrientesFosforo = 0; function toggleNutrientesAdicionaisFosforo() { const select = document.getElementById('outroNutrienteFosforo'); const container = document.getElementById('nutrientesAdicionaisFosforo'); if (select && container) { if (select.value === 'sim') { container.style.display = 'block'; if (document.getElementById('listaNutrientesFosforo').children.length === 0) { adicionarNutrienteFosforo(); } } else { container.style.display = 'none'; document.getElementById('listaNutrientesFosforo').innerHTML = ''; contadorNutrientesFosforo = 0; } } } function adicionarNutrienteFosforo() { contadorNutrientesFosforo++; const id = 'nutrienteFosforo' + contadorNutrientesFosforo; const html = <div id="${id}" style="background: white; padding: 12px; border-radius: 8px; margin-bottom: 12px; border: 1px solid #E5E5E7;"> <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"> <span style="font-size: 0.85em; color: #86868B;">Nutriente ${contadorNutrientesFosforo}</span> <button onclick="removerNutrienteFosforo('${id}')" class="control-btn" title="Remover">√ó</button> </div> <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;"> <div> <label style="font-size: 0.8em; color: #1D1D1F; font-weight: 400; display: block; margin-bottom: 4px;">Nutriente</label> <select class="dropdown-clean"> <option value="">Selecione</option> <option value="n">Nitrog√™nio (N)</option> <option value="k">Pot√°ssio (K‚ÇÇO)</option> <option value="s">Enxofre (S)</option> <option value="ca">C√°lcio (Ca)</option> <option value="mg">Magn√©sio (Mg)</option> </select> </div> <div> <label style="font-size: 0.8em; color: #1D1D1F; font-weight: 400; display: block; margin-bottom: 4px;">Teor (%)</label> <input type="number" step="0.1" placeholder="0.0" style="width: 100%; border: 1px solid #D1D1D6; border-radius: 6px; padding: 6px 10px; font-size: 0.9em; background: white;"> </div> </div> </div> ; document.getElementById('listaNutrientesFosforo').insertAdjacentHTML('beforeend', html); } function removerNutrienteFosforo(id) { const elemento = document.getElementById(id); if (elemento) { elemento.remove(); } } // ======================================== // M√âTODOS DE APLICA√á√ÉO - MICRONUTRIENTES // ======================================== const metodosMicronutrientes = { fe: null, mn: null, zn: null, cu: null, b: null, mo: null, ni: null, se: null }; function toggleMetodosMicro(elemento, event) { event.stopPropagation(); const dropdown = document.getElementById('metodos' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); const btn = document.getElementById('btn' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); // Fecha todos os outros dropdowns document.querySelectorAll('.metodos-micro-dropdown').forEach(d => { if (d !== dropdown) { d.classList.remove('active'); } }); document.querySelectorAll('.btn-add-micro').forEach(b => { if (b !== btn) { b.classList.remove('active'); } }); // Toggle do dropdown atual dropdown.classList.toggle('active'); btn.classList.toggle('active'); } function selecionarMetodoMicro(elemento, metodo, event) { event.stopPropagation(); // Salva sele√ß√£o metodosMicronutrientes[elemento] = metodo; // Fecha dropdown const dropdown = document.getElementById('metodos' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); const btn = document.getElementById('btn' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); setTimeout(() => { dropdown.classList.remove('active'); btn.classList.remove('active'); }, 200); // Abre card de recomenda√ß√£o abrirCardRecomendacao(elemento, metodo); console.log(${elemento.toUpperCase()}: ${metodo} selecionado); } function abrirCardRecomendacao(elemento, metodo) { const card = document.getElementById('cardRecomendacao' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); const badge = document.getElementById('badgeMetodo' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); if (card) { card.style.display = 'block'; // Atualiza badge com m√©todo if (badge) { const textos = { 'solo': 'Solo', 'foliar': 'Foliar', 'solo-foliar': 'S+F' }; badge.textContent = textos[metodo] || metodo; } // Reset: mostra pills de reg√™ncia novamente const regenciaContainer = document.getElementById('regenciaContainer' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); if (regenciaContainer) { regenciaContainer.style.display = 'flex'; regenciaContainer.querySelectorAll('.pill-opcao').forEach(pill => { pill.classList.remove('removida', 'selecionada'); pill.style.display = 'inline-flex'; }); } // Esconde containers seguintes ['especificaContainer', 'fonteContainer', 'resumo'].forEach(id => { const el = document.getElementById(id + elemento.charAt(0).toUpperCase() + elemento.slice(1)); if (el) el.style.display = 'none'; }); } } function fecharRecomendacao(elemento) { const card = document.getElementById('cardRecomendacao' + elemento.charAt(0).toUpperCase() + elemento.slice(1)); if (card) { card.style.display = 'none'; } metodosMicronutrientes[elemento] = null; } // ======================================== // SISTEMA DE PILLS QUE DESAPARECEM // ======================================== const selecoes = {}; function selecionarOpcao(elemento, tipo, valor, pillElement) { // Inicializa objeto de sele√ß√µes if (!selecoes[elemento]) { selecoes[elemento] = {}; } // Salva sele√ß√£o selecoes[elemento][tipo] = valor; // Anima pill selecionada pillElement.classList.add('selecionada'); // Remove outras pills ap√≥s delay setTimeout(() => { const container = pillElement.parentElement; const pills = container.querySelectorAll('.pill-opcao'); pills.forEach(pill => { if (pill !== pillElement) { pill.classList.add('removida'); } }); // Remove do DOM ap√≥s anima√ß√£o setTimeout(() => { pills.forEach(pill => { if (pill !== pillElement) { pill.style.display = 'none'; } }); // Pr√≥ximo passo proximoPasso(elemento, tipo, valor); }, 200); }, 300); } function proximoPasso(elemento, tipo, valor) { const elemCap = elemento.charAt(0).toUpperCase() + elemento.slice(1); if (tipo === 'regencia') { // Mostra op√ß√µes espec√≠ficas (Autores, Tecnologias ou Cultivares) mostrarEspecificas(elemento, valor); } else if (tipo === 'especifica') { // Mostra fontes const fonteContainer = document.getElementById('fonteContainer' + elemCap); if (fonteContainer) { fonteContainer.style.display = 'block'; } } else if (tipo === 'fonte') { // Mostra resumo de conclus√£o const resumo = document.getElementById('resumo' + elemCap); if (resumo) { resumo.style.display = 'block'; } } } // Dados de reg√™ncia const dadosRegencia = { autor: [ { val: 'malavolta', txt: 'Malavolta (1980)' }, { val: 'raij', txt: 'Raij et al. (1997)' }, { val: 'sousa', txt: 'Sousa & Lobato (2004)' }, { val: 'novais', txt: 'Novais et al. (2007)' }, { val: 'embrapa', txt: 'Embrapa (2013)' } ], tecnologia: [ { val: 'convencional', txt: 'Convencional' }, { val: 'intacta', txt: 'Intacta RR2' }, { val: 'enlist', txt: 'Enlist E3' }, { val: 'xtend', txt: 'XtendFlex' }, { val: 'liberty', txt: 'Liberty Link' } ], cultivar: [ { val: 'tmg7062', txt: 'TMG 7062' }, { val: 'ns7709', txt: 'NS 7709' }, { val: 'm8644', txt: 'M 8644' }, { val: 'as3730', txt: 'AS 3730' }, { val: 'bmx', txt: 'BMX Pot√™ncia' } ] }; function mostrarEspecificas(elemento, tipoRegencia) { const elemCap = elemento.charAt(0).toUpperCase() + elemento.slice(1); const container = document.getElementById('especificaContainer' + elemCap); const label = document.getElementById('labelEspecifica' + elemCap); const opsContainer = document.getElementById('especificaOps' + elemCap); if (container && opsContainer && label) { // Atualiza label const labels = { 'autor': 'Autor/Refer√™ncia', 'tecnologia': 'Tecnologia', 'cultivar': 'Cultivar' }; label.textContent = labels[tipoRegencia] || ''; // Gera pills opsContainer.innerHTML = ''; dadosRegencia[tipoRegencia].forEach(item => { const pill = document.createElement('button'); pill.className = 'pill-opcao'; pill.textContent = item.txt; pill.onclick = function() { selecionarOpcao(elemento, 'especifica', item.val, this); }; opsContainer.appendChild(pill); }); container.style.display = 'block'; } } // Fecha dropdowns ao clicar fora document.addEventListener('click', function(event) { // Fecha dropdown de amostras if (!event.target.closest('#btnAmostras') && !event.target.closest('#amostrasMenu')) { const menu = document.getElementById('amostrasMenu'); const btn = document.getElementById('btnAmostras'); if (menu) menu.classList.remove('active'); if (btn) btn.classList.remove('active'); } // Fecha dropdowns de micronutrientes if (!event.target.closest('.btn-add-micro') && !event.target.closest('.metodos-micro-dropdown')) { document.querySelectorAll('.metodos-micro-dropdown').forEach(d => { d.classList.remove('active'); }); document.querySelectorAll('.btn-add-micro').forEach(b => { b.classList.remove('active'); }); } }); </script> </body> </html>
